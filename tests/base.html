<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>Testing dojo.fx</title>
		<script type="text/javascript" src="../../dojo/dojo.js" djConfig="isDebug: true"></script>
		<script type="text/javascript" src="../base.js"></script>
		<script type="text/javascript">
			dojo.require("doh.runner");

			dojo.addOnLoad(function(){
				doh.register("t", 
					[
					
						function show(t){
							
							dojo.show("showMe");
							var s = dojo.style("showMe","display");
							t.f(s == "none");
							
						},
						
						function hide(t){
							
							dojo.hide("showMe");
							var s = dojo.style("showMe","display");
							t.is(s, "none");
							
						},
						
						function toggle(t){

							dojo.toggle("showMe");
							var s = dojo.style("showMe","display");
							t.f(s == "none");
						},
						
						// FIXME: need async tests for "slow", "fast", and "mild" -- ugh
						
						function appendTo(t){
							
							dojo.query("#bar > li").appendTo("#foo");
							t.is(2, dojo.query("#foo > li").length);
							
						},

						function append(t){
						
							dojo.query("#appendTest").append("#appendMe");
							var id = dojo.query("#appendTest > #appendMe")[0].id;
							t.is(id, "appendMe");
							
						},

						function appendClone(t){
							dojo.query("div.needsData").append("p.cloneMe", true);
							t.is(4, dojo.query("#cloneTest p").length);
						},
						
						function destroy(t){
							
							dojo.query("#bar").destroy();
							t.is(undefined, dojo.byId("bar"));
							
						},
						
						function wrap(t){
							
							var n = dojo.query("#foo").wrap("div")[0].id;
							// returned the right list:
							t.is(n, "foo");
							// parent is a div
							t.is(dojo.byId("foo").parentNode.nodeName.toLowerCase(), "div")
							
						},
						
						function create(t){
						
							var n = dojo.create("div");
							dojo.addClass(n,"createdDiv");
							t.t(dojo.hasClass(n,"createdDiv"));
							dojo.place(n, dojo.body());
							t.is(n, dojo.query("div.createdDiv")[0]);	
						},
						
						function createFromString(t){
							
							var n = dojo.create("<div class='bar'><p class='baz'>hi</p></div>");
							dojo.place(n, dojo.body());
							t.is(1, dojo.query("div.bar > p.baz").length);
							
						},
						
						function createTwice(t){
						
							var holder = dojo.create("div");
							dojo.place(holder, dojo.body());
							
							// create two nodes before placing them anywhere:
							var n1 = dojo.create("<p class='once'>hi</p>");
							var n2 = dojo.create("<div class='once'>hi</div>");
							
							dojo.place(n1, holder);
							dojo.place(n2, holder);
							t.is(1, dojo.query("p.once").length);
							t.is(1, dojo.query("div.once").length);
							t.is(2, dojo.query(".once").length);
							
						},
						
						function wrapList(t){
							
							dojo.query("#foo")
								.wrap("div", true)
									.addClass("hasBar")
								.end()
								.addClass("innerBar")
							;
								
							var n = dojo.query(".hasBar > .innerBar").length;
							t.is(1, n);
							
						},
						
						function get(t){
							t.is(dojo.byId("appendTest"), dojo.query("#appendTest").get());
						},
						
						function hoverAPI_both(t){
							dojo.query("#foo > li").hover(function(e){ 
								t.is("mouseover", e.type);
							}, function(e){ 
								t.is("mouseout", e.type);
							});
						},
						
						function hoverAPI_one(t){
							dojo.query("#foo > li").hover(function(e){ 
								
							});
							// if no errors thrown ...
						},
						
						// globals are borked after this test:
						function conflict(t){
							dojo.conflict();
							t.t(dojo.isFunction($));
						},
						
						function conflict_query(t){
							t.is(1, $("#foo").length);
						}
					]
				);
				doh.run();
			});
		</script>
	<body>

		<h1>Base Plugins QuickTest</h1>

		<ul id="foo"><li class="bar">one</li></ul>
		<ul id="bar"><li class="inbar">one</li></ul>

		<div id="cloneTest">
			<div class="needsData"></div>
			<div class="needsData"></div>
			<div class="needsData"></div>
			<p class="cloneMe">sample</p>
		</div>

		<div id="appendTest"></div> <div id="appendMe">now</div>

		<p id="showMe" style="display:none">I'm hidden</p>
		
	</body>
</html>
