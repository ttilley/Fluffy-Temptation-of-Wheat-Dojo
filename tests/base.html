<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
	"http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>Testing dojo.fx</title>
		<script type="text/javascript" src="../../dojo/dojo.js" djConfig="isDebug: true"></script>
		<script type="text/javascript" src="../base.js"></script>
		<script type="text/javascript">
			dojo.require("doh.runner");

			dojo.addOnLoad(function(){
				doh.register("t", 
					[
						function appendTo(t){
							
							dojo.query("#bar > li").appendTo("#foo");
							t.is(2, dojo.query("#foo > li").length);
							
						},

						function append(t){
						
							dojo.query("#appendTest").append("#appendMe");
							var id = dojo.query("#appendTest > #appendMe")[0].id;
							t.is(id, "appendMe");
							
						},

						function appendClone(t){
							dojo.query("div.needsData").append("p.cloneMe", true);
							t.is(4, dojo.query("#cloneTest p").length);
						},
						
						function destroy(t){
							
							dojo.query("#bar").destroy();
							t.is(undefined, dojo.byId("bar"));
							
						},
						
						function wrap(t){
							
							var n = dojo.query("#foo").wrap("div")[0].id;
							// returned the right list:
							t.is(n, "foo");
							// parent is a div
							t.is(dojo.byId("foo").parentNode.nodeName.toLowerCase(), "div")
							
						},
						
						function wrapList(t){
							
							dojo.query("#foo")
								.wrap("div", true)
									.addClass("hasBar")
								.end()
								.addClass("innerBar")
							;
								
							var n = dojo.query(".hasBar > .innerBar").length;
							t.is(1, n);
							
						},
						
						function get(t){
							t.is(dojo.byId("appendTest"), dojo.query("#appendTest").get());
						},
						
						function hoverAPI_both(t){
							dojo.query("#foo > li").hover(function(e){ 
								t.is("mouseover", e.type);
							}, function(e){ 
								t.is("mouseout", e.type);
							});
						},
						
						function hoverAPI_one(t){
							dojo.query("#foo > li").hover(function(e){ 
								
							});
							// if no errors thrown ...
						},
						
						// globals are borked after this test:
						function conflict(t){
							dojo.conflict();
							t.t(dojo.isFunction($));
						},
						
						function conflict_query(t){
							t.is(1, $("#foo").length);
						}
					]
				);
				doh.run();
			});
		</script>
	<body>

		<h1>Base Plugins QuickTest</h1>

		<ul id="foo"><li class="bar">one</li></ul>
		<ul id="bar"><li class="inbar">one</li></ul>

		<div id="cloneTest">
			<div class="needsData"></div>
			<div class="needsData"></div>
			<div class="needsData"></div>
			<p class="cloneMe">sample</p>
		</div>

		<div id="appendTest"></div> <div id="appendMe">now</div>

	</body>
</html>
